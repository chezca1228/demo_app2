<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Module: Addressable::IDNA</title>

  <link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

  <script src="../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="module">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../lib/addressable/idna/pure_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/addressable/idna/pure.rb">lib/addressable/idna/pure.rb</a></li>
          
            <li><a href="../lib/addressable/idna/native_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/addressable/idna/native.rb">lib/addressable/idna/native.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      

      

      
      <!-- Namespace Contents -->
      <div id="namespace-list-section" class="section">
        <h3 class="section-header">Namespace</h3>
        <ul class="link-list">
          
          <li><span class="type">CLASS</span> <a href="IDNA/PunycodeBadInput.html">Addressable::IDNA::PunycodeBadInput</a></li>
          
          <li><span class="type">CLASS</span> <a href="IDNA/PunycodeBigOutput.html">Addressable::IDNA::PunycodeBigOutput</a></li>
          
          <li><span class="type">CLASS</span> <a href="IDNA/PunycodeOverflow.html">Addressable::IDNA::PunycodeOverflow</a></li>
          
        </ul>
      </div>
      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-to_ascii">::to_ascii</a></li>
          
          <li><a href="#method-c-to_unicode">::to_unicode</a></li>
          
          <li><a href="#method-c-unicode_normalize_kc">::unicode_normalize_kc</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../Addressable.html">Addressable</a></li>
        
          <li><a href="../Addressable/IDNA.html">Addressable::IDNA</a></li>
        
          <li><a href="../Addressable/IDNA/PunycodeBadInput.html">Addressable::IDNA::PunycodeBadInput</a></li>
        
          <li><a href="../Addressable/IDNA/PunycodeBigOutput.html">Addressable::IDNA::PunycodeBigOutput</a></li>
        
          <li><a href="../Addressable/IDNA/PunycodeOverflow.html">Addressable::IDNA::PunycodeOverflow</a></li>
        
          <li><a href="../Addressable/Template.html">Addressable::Template</a></li>
        
          <li><a href="../Addressable/Template/InvalidTemplateOperatorError.html">Addressable::Template::InvalidTemplateOperatorError</a></li>
        
          <li><a href="../Addressable/Template/InvalidTemplateValueError.html">Addressable::Template::InvalidTemplateValueError</a></li>
        
          <li><a href="../Addressable/Template/MatchData.html">Addressable::Template::MatchData</a></li>
        
          <li><a href="../Addressable/Template/TemplateOperatorAbortedError.html">Addressable::Template::TemplateOperatorAbortedError</a></li>
        
          <li><a href="../Addressable/URI.html">Addressable::URI</a></li>
        
          <li><a href="../Addressable/URI/CharacterClasses.html">Addressable::URI::CharacterClasses</a></li>
        
          <li><a href="../Addressable/URI/InvalidURIError.html">Addressable::URI::InvalidURIError</a></li>
        
          <li><a href="../Addressable/VERSION.html">Addressable::VERSION</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="module">Addressable::IDNA</h1>

    <div id="description" class="description">
      
    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="ACE_MAX_LENGTH">ACE_MAX_LENGTH</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="ACE_PREFIX">ACE_PREFIX</a></dt>
          
          <dd class="description"><p>This module is loosely based on idn_actionmailer by Mick Staugaard, the
unicode library by Yoshida Masato, and the punycode implementation by
Kazuhiro Nishiyama.  Most of the code was copied verbatim, but some
reformatting was done, and some translation from C was done.</p>

<p>Without their code to work from as a base, weâ€™d all still be relying on the
presence of libidn.  Which nobody ever seems to have installed.</p>

<p>Original sources: <a
href="http://github.com/staugaard/idn_actionmailer">github.com/staugaard/idn_actionmailer</a>
<a
href="http://www.yoshidam.net/Ruby.html#unicode">www.yoshidam.net/Ruby.html#unicode</a>
<a
href="http://rubyforge.org/frs/?group_id=2550">rubyforge.org/frs/?group_id=2550</a></p></dd>
          
        
          <dt><a name="COMPOSITION_TABLE">COMPOSITION_TABLE</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="HANGUL_LBASE">HANGUL_LBASE</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="HANGUL_LCOUNT">HANGUL_LCOUNT</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="HANGUL_NCOUNT">HANGUL_NCOUNT</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="HANGUL_SBASE">HANGUL_SBASE</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="HANGUL_SCOUNT">HANGUL_SCOUNT</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="HANGUL_TBASE">HANGUL_TBASE</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="HANGUL_TCOUNT">HANGUL_TCOUNT</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="HANGUL_VBASE">HANGUL_VBASE</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="HANGUL_VCOUNT">HANGUL_VCOUNT</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="PUNYCODE_BASE">PUNYCODE_BASE</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="PUNYCODE_DAMP">PUNYCODE_DAMP</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="PUNYCODE_DELIMITER">PUNYCODE_DELIMITER</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="PUNYCODE_INITIAL_BIAS">PUNYCODE_INITIAL_BIAS</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="PUNYCODE_INITIAL_N">PUNYCODE_INITIAL_N</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="PUNYCODE_MAXINT">PUNYCODE_MAXINT</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="PUNYCODE_PRINT_ASCII">PUNYCODE_PRINT_ASCII</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="PUNYCODE_SKEW">PUNYCODE_SKEW</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="PUNYCODE_TMAX">PUNYCODE_TMAX</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="PUNYCODE_TMIN">PUNYCODE_TMIN</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="UNICODE_DATA">UNICODE_DATA</a></dt>
          
          <dd class="description"><p>This is a sparse Unicode table.  Codepoints without entries are assumed to
have the value: [0, 0, nil, nil, nil, nil, nil]</p></dd>
          
        
          <dt><a name="UNICODE_DATA_CANONICAL">UNICODE_DATA_CANONICAL</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="UNICODE_DATA_COMBINING_CLASS">UNICODE_DATA_COMBINING_CLASS</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="UNICODE_DATA_COMPATIBILITY">UNICODE_DATA_COMPATIBILITY</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="UNICODE_DATA_EXCLUSION">UNICODE_DATA_EXCLUSION</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="UNICODE_DATA_LOWERCASE">UNICODE_DATA_LOWERCASE</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="UNICODE_DATA_TITLECASE">UNICODE_DATA_TITLECASE</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="UNICODE_DATA_UPPERCASE">UNICODE_DATA_UPPERCASE</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="UNICODE_MAX_LENGTH">UNICODE_MAX_LENGTH</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="UTF8_REGEX">UTF8_REGEX</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="UTF8_REGEX_MULTIBYTE">UTF8_REGEX_MULTIBYTE</a></dt>
          
          <dd class="description"></dd>
          
        
        </dl>
      </div>
      

      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="to_ascii-method" class="method-detail ">
          <a name="method-c-to_ascii"></a>

          
          <div class="method-heading">
            <span class="method-name">to_ascii</span><span
              class="method-args">(input)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Converts from a Unicode internationalized domain name to an ASCII domain
name as described in RFC 3490.</p>
            

            
            <div class="method-source-code" id="to_ascii-source">
<pre>
<span class="ruby-comment"># File lib/addressable/idna/pure.rb, line 61</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">to_ascii</span>(<span class="ruby-identifier">input</span>)
  <span class="ruby-identifier">input</span> = <span class="ruby-identifier">input</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:force_encoding</span>)
    <span class="ruby-identifier">input</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">ASCII_8BIT</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">input</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">UTF8_REGEX</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">input</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">UTF8_REGEX_MULTIBYTE</span>
    <span class="ruby-identifier">parts</span> = <span class="ruby-identifier">unicode_downcase</span>(<span class="ruby-identifier">input</span>).<span class="ruby-identifier">split</span>(<span class="ruby-string">'.'</span>)
    <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">map!</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">part</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">part</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:force_encoding</span>)
        <span class="ruby-identifier">part</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">ASCII_8BIT</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">part</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">UTF8_REGEX</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">part</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">UTF8_REGEX_MULTIBYTE</span>
        <span class="ruby-constant">ACE_PREFIX</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">punycode_encode</span>(<span class="ruby-identifier">unicode_normalize_kc</span>(<span class="ruby-identifier">part</span>))
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">part</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">'.'</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">input</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- to_ascii-source -->
            
          </div>

          

          
        </div><!-- to_ascii-method -->

      
        <div id="to_unicode-method" class="method-detail ">
          <a name="method-c-to_unicode"></a>

          
          <div class="method-heading">
            <span class="method-name">to_unicode</span><span
              class="method-args">(input)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Converts from an ASCII domain name to a Unicode internationalized domain
name as described in RFC 3490.</p>
            

            
            <div class="method-source-code" id="to_unicode-source">
<pre>
<span class="ruby-comment"># File lib/addressable/idna/pure.rb, line 86</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">to_unicode</span>(<span class="ruby-identifier">input</span>)
  <span class="ruby-identifier">parts</span> = <span class="ruby-identifier">input</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">'.'</span>)
  <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">map!</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">part</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">part</span> <span class="ruby-operator">=~</span> <span class="ruby-node">/^#{ACE_PREFIX}/</span>
      <span class="ruby-identifier">punycode_decode</span>(<span class="ruby-identifier">part</span>[<span class="ruby-node">/^#{ACE_PREFIX}(.+)/</span>, <span class="ruby-value">1</span>])
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">part</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">output</span> = <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">'.'</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">output</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:force_encoding</span>)
    <span class="ruby-identifier">output</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">output</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- to_unicode-source -->
            
          </div>

          

          
        </div><!-- to_unicode-method -->

      
        <div id="unicode_normalize_kc-method" class="method-detail ">
          <a name="method-c-unicode_normalize_kc"></a>

          
          <div class="method-heading">
            <span class="method-name">unicode_normalize_kc</span><span
              class="method-args">(input)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Unicode normalization form KC.</p>
            

            
            <div class="method-source-code" id="unicode_normalize_kc-source">
<pre>
<span class="ruby-comment"># File lib/addressable/idna/pure.rb, line 103</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">unicode_normalize_kc</span>(<span class="ruby-identifier">input</span>)
  <span class="ruby-identifier">unpacked</span> = <span class="ruby-identifier">input</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-string">&quot;U*&quot;</span>)
  <span class="ruby-identifier">unpacked</span> =
    <span class="ruby-identifier">unicode_compose</span>(<span class="ruby-identifier">unicode_sort_canonical</span>(<span class="ruby-identifier">unicode_decompose</span>(<span class="ruby-identifier">unpacked</span>)))
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">unpacked</span>.<span class="ruby-identifier">pack</span>(<span class="ruby-string">&quot;U*&quot;</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- unicode_normalize_kc-source -->
            
          </div>

          

          
        </div><!-- unicode_normalize_kc-method -->

      
      </div><!-- public-class-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

