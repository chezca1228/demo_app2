<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Class: Object</title>

  <link rel="stylesheet" href="./rdoc.css" type="text/css" media="screen" />

  <script src="./js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="./lib/active_record/fixtures_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/active_record/fixtures.rb">lib/active_record/fixtures.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link">BasicObject</p>
        
      </div>
      

      

      

      

      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="./README_rdoc.html">README.rdoc</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="./images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="./ActiveRecord.html">ActiveRecord</a></li>
        
          <li><a href="./ActiveRecord/ActiveRecordError.html">ActiveRecord::ActiveRecordError</a></li>
        
          <li><a href="./ActiveRecord/AdapterNotFound.html">ActiveRecord::AdapterNotFound</a></li>
        
          <li><a href="./ActiveRecord/AdapterNotSpecified.html">ActiveRecord::AdapterNotSpecified</a></li>
        
          <li><a href="./ActiveRecord/Aggregations.html">ActiveRecord::Aggregations</a></li>
        
          <li><a href="./ActiveRecord/Aggregations/ClassMethods.html">ActiveRecord::Aggregations::ClassMethods</a></li>
        
          <li><a href="./ActiveRecord/AssociationTypeMismatch.html">ActiveRecord::AssociationTypeMismatch</a></li>
        
          <li><a href="./ActiveRecord/Associations.html">ActiveRecord::Associations</a></li>
        
          <li><a href="./ActiveRecord/Associations/ClassMethods.html">ActiveRecord::Associations::ClassMethods</a></li>
        
          <li><a href="./ActiveRecord/AttributeAssignmentError.html">ActiveRecord::AttributeAssignmentError</a></li>
        
          <li><a href="./ActiveRecord/AttributeMethods.html">ActiveRecord::AttributeMethods</a></li>
        
          <li><a href="./ActiveRecord/AttributeMethods/BeforeTypeCast.html">ActiveRecord::AttributeMethods::BeforeTypeCast</a></li>
        
          <li><a href="./ActiveRecord/AttributeMethods/ClassMethods.html">ActiveRecord::AttributeMethods::ClassMethods</a></li>
        
          <li><a href="./ActiveRecord/AttributeMethods/Dirty.html">ActiveRecord::AttributeMethods::Dirty</a></li>
        
          <li><a href="./ActiveRecord/AttributeMethods/PrimaryKey.html">ActiveRecord::AttributeMethods::PrimaryKey</a></li>
        
          <li><a href="./ActiveRecord/AttributeMethods/PrimaryKey/ClassMethods.html">ActiveRecord::AttributeMethods::PrimaryKey::ClassMethods</a></li>
        
          <li><a href="./ActiveRecord/AttributeMethods/Query.html">ActiveRecord::AttributeMethods::Query</a></li>
        
          <li><a href="./ActiveRecord/AttributeMethods/Read.html">ActiveRecord::AttributeMethods::Read</a></li>
        
          <li><a href="./ActiveRecord/AttributeMethods/Read/ClassMethods.html">ActiveRecord::AttributeMethods::Read::ClassMethods</a></li>
        
          <li><a href="./ActiveRecord/AttributeMethods/TimeZoneConversion.html">ActiveRecord::AttributeMethods::TimeZoneConversion</a></li>
        
          <li><a href="./ActiveRecord/AttributeMethods/TimeZoneConversion/ClassMethods.html">ActiveRecord::AttributeMethods::TimeZoneConversion::ClassMethods</a></li>
        
          <li><a href="./ActiveRecord/AttributeMethods/Write.html">ActiveRecord::AttributeMethods::Write</a></li>
        
          <li><a href="./ActiveRecord/AttributeMethods/Write/ClassMethods.html">ActiveRecord::AttributeMethods::Write::ClassMethods</a></li>
        
          <li><a href="./ActiveRecord/AutosaveAssociation.html">ActiveRecord::AutosaveAssociation</a></li>
        
          <li><a href="./ActiveRecord/AutosaveAssociation/ClassMethods.html">ActiveRecord::AutosaveAssociation::ClassMethods</a></li>
        
          <li><a href="./ActiveRecord/Base.html">ActiveRecord::Base</a></li>
        
          <li><a href="./ActiveRecord/Batches.html">ActiveRecord::Batches</a></li>
        
          <li><a href="./ActiveRecord/Calculations.html">ActiveRecord::Calculations</a></li>
        
          <li><a href="./ActiveRecord/Callbacks.html">ActiveRecord::Callbacks</a></li>
        
          <li><a href="./ActiveRecord/Coders.html">ActiveRecord::Coders</a></li>
        
          <li><a href="./ActiveRecord/ConfigurationError.html">ActiveRecord::ConfigurationError</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters.html">ActiveRecord::ConnectionAdapters</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/AbstractAdapter.html">ActiveRecord::ConnectionAdapters::AbstractAdapter</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/ConnectionHandler.html">ActiveRecord::ConnectionAdapters::ConnectionHandler</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/ConnectionManagement.html">ActiveRecord::ConnectionAdapters::ConnectionManagement</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/ConnectionPool.html">ActiveRecord::ConnectionAdapters::ConnectionPool</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/DatabaseLimits.html">ActiveRecord::ConnectionAdapters::DatabaseLimits</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/DatabaseStatements.html">ActiveRecord::ConnectionAdapters::DatabaseStatements</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/Mysql2Adapter.html">ActiveRecord::ConnectionAdapters::Mysql2Adapter</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/Mysql2Column.html">ActiveRecord::ConnectionAdapters::Mysql2Column</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/MysqlAdapter.html">ActiveRecord::ConnectionAdapters::MysqlAdapter</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/PostgreSQLAdapter.html">ActiveRecord::ConnectionAdapters::PostgreSQLAdapter</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/PostgreSQLAdapter/TableDefinition.html">ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::TableDefinition</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/PostgreSQLColumn.html">ActiveRecord::ConnectionAdapters::PostgreSQLColumn</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/QueryCache.html">ActiveRecord::ConnectionAdapters::QueryCache</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/Quoting.html">ActiveRecord::ConnectionAdapters::Quoting</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/SQLiteAdapter.html">ActiveRecord::ConnectionAdapters::SQLiteAdapter</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/SQLiteAdapter/Version.html">ActiveRecord::ConnectionAdapters::SQLiteAdapter::Version</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/SchemaStatements.html">ActiveRecord::ConnectionAdapters::SchemaStatements</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/Table.html">ActiveRecord::ConnectionAdapters::Table</a></li>
        
          <li><a href="./ActiveRecord/ConnectionAdapters/TableDefinition.html">ActiveRecord::ConnectionAdapters::TableDefinition</a></li>
        
          <li><a href="./ActiveRecord/ConnectionNotEstablished.html">ActiveRecord::ConnectionNotEstablished</a></li>
        
          <li><a href="./ActiveRecord/ConnectionTimeoutError.html">ActiveRecord::ConnectionTimeoutError</a></li>
        
          <li><a href="./ActiveRecord/CounterCache.html">ActiveRecord::CounterCache</a></li>
        
          <li><a href="./ActiveRecord/DangerousAttributeError.html">ActiveRecord::DangerousAttributeError</a></li>
        
          <li><a href="./ActiveRecord/DynamicFinderMatch.html">ActiveRecord::DynamicFinderMatch</a></li>
        
          <li><a href="./ActiveRecord/DynamicScopeMatch.html">ActiveRecord::DynamicScopeMatch</a></li>
        
          <li><a href="./ActiveRecord/FinderMethods.html">ActiveRecord::FinderMethods</a></li>
        
          <li><a href="./ActiveRecord/Fixtures.html">ActiveRecord::Fixtures</a></li>
        
          <li><a href="./ActiveRecord/Generators.html">ActiveRecord::Generators</a></li>
        
          <li><a href="./ActiveRecord/Generators/Migration.html">ActiveRecord::Generators::Migration</a></li>
        
          <li><a href="./ActiveRecord/Generators/MigrationGenerator.html">ActiveRecord::Generators::MigrationGenerator</a></li>
        
          <li><a href="./ActiveRecord/Generators/ModelGenerator.html">ActiveRecord::Generators::ModelGenerator</a></li>
        
          <li><a href="./ActiveRecord/Generators/ObserverGenerator.html">ActiveRecord::Generators::ObserverGenerator</a></li>
        
          <li><a href="./ActiveRecord/Generators/SessionMigrationGenerator.html">ActiveRecord::Generators::SessionMigrationGenerator</a></li>
        
          <li><a href="./ActiveRecord/HasManyThroughNestedAssociationsAreReadonly.html">ActiveRecord::HasManyThroughNestedAssociationsAreReadonly</a></li>
        
          <li><a href="./ActiveRecord/IdentityMap.html">ActiveRecord::IdentityMap</a></li>
        
          <li><a href="./ActiveRecord/IdentityMap/Middleware.html">ActiveRecord::IdentityMap::Middleware</a></li>
        
          <li><a href="./ActiveRecord/InvalidForeignKey.html">ActiveRecord::InvalidForeignKey</a></li>
        
          <li><a href="./ActiveRecord/IrreversibleMigration.html">ActiveRecord::IrreversibleMigration</a></li>
        
          <li><a href="./ActiveRecord/Locking.html">ActiveRecord::Locking</a></li>
        
          <li><a href="./ActiveRecord/Locking/Optimistic.html">ActiveRecord::Locking::Optimistic</a></li>
        
          <li><a href="./ActiveRecord/Locking/Optimistic/ClassMethods.html">ActiveRecord::Locking::Optimistic::ClassMethods</a></li>
        
          <li><a href="./ActiveRecord/Locking/Pessimistic.html">ActiveRecord::Locking::Pessimistic</a></li>
        
          <li><a href="./ActiveRecord/LogSubscriber.html">ActiveRecord::LogSubscriber</a></li>
        
          <li><a href="./ActiveRecord/Migration.html">ActiveRecord::Migration</a></li>
        
          <li><a href="./ActiveRecord/Migration/CommandRecorder.html">ActiveRecord::Migration::CommandRecorder</a></li>
        
          <li><a href="./ActiveRecord/MigrationProxy.html">ActiveRecord::MigrationProxy</a></li>
        
          <li><a href="./ActiveRecord/MultiparameterAssignmentErrors.html">ActiveRecord::MultiparameterAssignmentErrors</a></li>
        
          <li><a href="./ActiveRecord/NamedScope.html">ActiveRecord::NamedScope</a></li>
        
          <li><a href="./ActiveRecord/NamedScope/ClassMethods.html">ActiveRecord::NamedScope::ClassMethods</a></li>
        
          <li><a href="./ActiveRecord/NestedAttributes.html">ActiveRecord::NestedAttributes</a></li>
        
          <li><a href="./ActiveRecord/NestedAttributes/ClassMethods.html">ActiveRecord::NestedAttributes::ClassMethods</a></li>
        
          <li><a href="./ActiveRecord/NestedAttributes/TooManyRecords.html">ActiveRecord::NestedAttributes::TooManyRecords</a></li>
        
          <li><a href="./ActiveRecord/Observer.html">ActiveRecord::Observer</a></li>
        
          <li><a href="./ActiveRecord/Persistence.html">ActiveRecord::Persistence</a></li>
        
          <li><a href="./ActiveRecord/PreparedStatementInvalid.html">ActiveRecord::PreparedStatementInvalid</a></li>
        
          <li><a href="./ActiveRecord/QueryCache.html">ActiveRecord::QueryCache</a></li>
        
          <li><a href="./ActiveRecord/QueryCache/ClassMethods.html">ActiveRecord::QueryCache::ClassMethods</a></li>
        
          <li><a href="./ActiveRecord/QueryMethods.html">ActiveRecord::QueryMethods</a></li>
        
          <li><a href="./ActiveRecord/Railtie.html">ActiveRecord::Railtie</a></li>
        
          <li><a href="./ActiveRecord/Railties.html">ActiveRecord::Railties</a></li>
        
          <li><a href="./ActiveRecord/Railties/ControllerRuntime.html">ActiveRecord::Railties::ControllerRuntime</a></li>
        
          <li><a href="./ActiveRecord/Railties/ControllerRuntime/ClassMethods.html">ActiveRecord::Railties::ControllerRuntime::ClassMethods</a></li>
        
          <li><a href="./ActiveRecord/ReadOnlyRecord.html">ActiveRecord::ReadOnlyRecord</a></li>
        
          <li><a href="./ActiveRecord/RecordInvalid.html">ActiveRecord::RecordInvalid</a></li>
        
          <li><a href="./ActiveRecord/RecordNotFound.html">ActiveRecord::RecordNotFound</a></li>
        
          <li><a href="./ActiveRecord/RecordNotSaved.html">ActiveRecord::RecordNotSaved</a></li>
        
          <li><a href="./ActiveRecord/RecordNotUnique.html">ActiveRecord::RecordNotUnique</a></li>
        
          <li><a href="./ActiveRecord/Reflection.html">ActiveRecord::Reflection</a></li>
        
          <li><a href="./ActiveRecord/Reflection/ClassMethods.html">ActiveRecord::Reflection::ClassMethods</a></li>
        
          <li><a href="./ActiveRecord/Reflection/MacroReflection.html">ActiveRecord::Reflection::MacroReflection</a></li>
        
          <li><a href="./ActiveRecord/Relation.html">ActiveRecord::Relation</a></li>
        
          <li><a href="./ActiveRecord/Result.html">ActiveRecord::Result</a></li>
        
          <li><a href="./ActiveRecord/Rollback.html">ActiveRecord::Rollback</a></li>
        
          <li><a href="./ActiveRecord/Schema.html">ActiveRecord::Schema</a></li>
        
          <li><a href="./ActiveRecord/Serialization.html">ActiveRecord::Serialization</a></li>
        
          <li><a href="./ActiveRecord/SerializationTypeMismatch.html">ActiveRecord::SerializationTypeMismatch</a></li>
        
          <li><a href="./ActiveRecord/SessionStore.html">ActiveRecord::SessionStore</a></li>
        
          <li><a href="./ActiveRecord/SessionStore/Session.html">ActiveRecord::SessionStore::Session</a></li>
        
          <li><a href="./ActiveRecord/SessionStore/SqlBypass.html">ActiveRecord::SessionStore::SqlBypass</a></li>
        
          <li><a href="./ActiveRecord/SpawnMethods.html">ActiveRecord::SpawnMethods</a></li>
        
          <li><a href="./ActiveRecord/StaleObjectError.html">ActiveRecord::StaleObjectError</a></li>
        
          <li><a href="./ActiveRecord/StatementInvalid.html">ActiveRecord::StatementInvalid</a></li>
        
          <li><a href="./ActiveRecord/TestFixtures.html">ActiveRecord::TestFixtures</a></li>
        
          <li><a href="./ActiveRecord/TestFixtures/ClassMethods.html">ActiveRecord::TestFixtures::ClassMethods</a></li>
        
          <li><a href="./ActiveRecord/ThrowResult.html">ActiveRecord::ThrowResult</a></li>
        
          <li><a href="./ActiveRecord/Timestamp.html">ActiveRecord::Timestamp</a></li>
        
          <li><a href="./ActiveRecord/Transactions.html">ActiveRecord::Transactions</a></li>
        
          <li><a href="./ActiveRecord/Transactions/ClassMethods.html">ActiveRecord::Transactions::ClassMethods</a></li>
        
          <li><a href="./ActiveRecord/UnknownAttributeError.html">ActiveRecord::UnknownAttributeError</a></li>
        
          <li><a href="./ActiveRecord/Validations.html">ActiveRecord::Validations</a></li>
        
          <li><a href="./ActiveRecord/Validations/AssociatedValidator.html">ActiveRecord::Validations::AssociatedValidator</a></li>
        
          <li><a href="./ActiveRecord/Validations/ClassMethods.html">ActiveRecord::Validations::ClassMethods</a></li>
        
          <li><a href="./ActiveRecord/Validations/UniquenessValidator.html">ActiveRecord::Validations::UniquenessValidator</a></li>
        
          <li><a href="./ActiveRecord/WrappedDatabaseException.html">ActiveRecord::WrappedDatabaseException</a></li>
        
          <li><a href="./Mysql.html">Mysql</a></li>
        
          <li><a href="./Mysql/Result.html">Mysql::Result</a></li>
        
          <li><a href="./Mysql/Stmt.html">Mysql::Stmt</a></li>
        
          <li><a href="./Mysql/Time.html">Mysql::Time</a></li>
        
          <li><a href="./ArJdbcMySQL.html">ArJdbcMySQL</a></li>
        
          <li><a href="./ArJdbcMySQL/Error.html">ArJdbcMySQL::Error</a></li>
        
          <li><a href="./FixturesFileNotFound.html">FixturesFileNotFound</a></li>
        
          <li><a href="./Object.html">Object</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">Object</h1>

    <div id="description" class="description">
      
    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="Fixture">Fixture</a></dt>
          
          <dd class="description"><p><a href="Object.html#Fixtures">Fixtures</a> are a way of organizing data
that you want to test against; in short, sample data.</p>

<h1><a href="Object.html#Fixture">Fixture</a> formats</h1>

<p><a href="Object.html#Fixtures">Fixtures</a> come in 1 flavor:</p>

<pre>1.  YAML fixtures</pre>

<h2>YAML fixtures</h2>

<p>This type of fixture is in YAML format and the preferred default. YAML is a
file format which describes data structures in a non-verbose,
human-readable format. It ships with Ruby 1.8.1+.</p>

<p>Unlike single-file fixtures, YAML fixtures are stored in a single file per
model, which are placed in the directory appointed by
<tt>ActiveSupport::TestCase.fixture_path=(path)</tt> (this is automatically
configured for Rails, so you can just put your files in
<tt>&lt;your-rails-app&gt;/test/fixtures/</tt>). The fixture file ends with
the <tt>.yml</tt> file extension (Rails example:
<tt>&lt;your-rails-app&gt;/test/fixtures/web_sites.yml</tt>). The format of
a YAML fixture file looks like this:</p>

<pre>rubyonrails:
  id: 1
  name: Ruby on Rails
  url: http://www.rubyonrails.org

google:
  id: 2
  name: Google
  url: http://www.google.com</pre>

<p>This YAML fixture file includes two fixtures.  Each YAML fixture (ie.
record) is given a name and is followed by an indented list of key/value
pairs in the “key: value” format.  Records are separated by a blank line
for your viewing pleasure.</p>

<p>Note that YAML fixtures are unordered. If you want ordered fixtures, use
the omap YAML type. See <a
href="http://yaml.org/type/omap.html">yaml.org/type/omap.html</a> for the
specification.  You will need ordered fixtures when you have foreign key
constraints on keys in the same table. This is commonly needed for tree
structures.  Example:</p>

<pre>--- !omap
- parent:
    id:         1
    parent_id:  NULL
    title:      Parent
- child:
    id:         2
    parent_id:  1
    title:      Child</pre>

<h1>Using fixtures in testcases</h1>

<p>Since fixtures are a testing construct, we use them in our unit and
functional tests.  There are two ways to use the fixtures, but first let’s
take a look at a sample unit test:</p>

<pre>require 'test_helper'

class WebSiteTest &lt; ActiveSupport::TestCase
  test &quot;web_site_count&quot; do
    assert_equal 2, WebSite.count
  end
end</pre>

<p>By default, the <tt>test_helper module</tt> will load all of your fixtures
into your test database, so this test will succeed. The testing environment
will automatically load the all fixtures into the database before each
test. To ensure consistent data, the environment deletes the fixtures
before running the load.</p>

<p>In addition to being available in the database, the fixture’s data may also
be accessed by using a special dynamic method, which has the same name as
the model, and accepts the name of the fixture to instantiate:</p>

<pre>test &quot;find&quot; do
  assert_equal &quot;Ruby on Rails&quot;, web_sites(:rubyonrails).name
end</pre>

<p>Alternatively, you may enable auto-instantiation of the fixture data. For
instance, take the following tests:</p>

<pre>test &quot;find_alt_method_1&quot; do
  assert_equal &quot;Ruby on Rails&quot;, @web_sites['rubyonrails']['name']
end

test &quot;find_alt_method_2&quot; do
  assert_equal &quot;Ruby on Rails&quot;, @rubyonrails.news
end</pre>

<p>In order to use these methods to access fixtured data within your
testcases, you must specify one of the following in your
<tt>ActiveSupport::TestCase</tt>-derived class:</p>
<ul><li>
<p>to fully enable instantiated fixtures (enable alternate methods #1 and #2
above)</p>

<pre>self.use_instantiated_fixtures = true</pre>
</li><li>
<p>create only the hash for the fixtures, do not ‘find’ each instance (enable
alternate method #1 only)</p>

<pre>self.use_instantiated_fixtures = :no_instances</pre>
</li></ul>

<p>Using either of these alternate methods incurs a performance hit, as the
fixtured data must be fully traversed in the database to create the fixture
hash and/or instance variables. This is expensive for large sets of
fixtured data.</p>

<h1>Dynamic fixtures with ERB</h1>

<p>Some times you don’t care about the content of the fixtures as much as you
care about the volume. In these cases, you can mix ERB in with your YAML
fixtures to create a bunch of fixtures for load testing, like:</p>

<pre>&lt;% for i in 1..1000 %&gt;
fix_&lt;%= i %&gt;:
  id: &lt;%= i %&gt;
  name: guy_&lt;%= 1 %&gt;
&lt;% end %&gt;</pre>

<p>This will create 1000 very simple YAML fixtures.</p>

<p>Using ERB, you can also inject dynamic values into your fixtures with
inserts like <tt>&lt;%= Date.today.strftime(&quot;%Y-%m-%d&quot;)
%&gt;</tt>. This is however a feature to be used with some caution. The
point of fixtures are that they’re stable units of predictable sample data.
If you feel that you need to inject dynamic values, then perhaps you should
reexamine whether your application is properly testable. Hence, dynamic
values in fixtures are to be considered a code smell.</p>

<h1>Transactional fixtures</h1>

<p>TestCases can use begin+rollback to isolate their changes to the database
instead of having to delete+insert for every test case.</p>

<pre>class FooTest &lt; ActiveSupport::TestCase
  self.use_transactional_fixtures = true

  test &quot;godzilla&quot; do
    assert !Foo.find(:all).empty?
    Foo.destroy_all
    assert Foo.find(:all).empty?
  end

  test &quot;godzilla aftermath&quot; do
    assert !Foo.find(:all).empty?
  end
end</pre>

<p>If you preload your test database with all fixture data (probably in the
Rakefile task) and use transactional fixtures, then you may omit all
fixtures declarations in your test cases since all the data’s already there
and every case rolls back its changes.</p>

<p>In order to use instantiated fixtures with preloaded data, set
<tt>self.pre_loaded_fixtures</tt> to true. This will provide access to
fixture data for every table that has been loaded through fixtures
(depending on the value of <tt>use_instantiated_fixtures</tt>)</p>

<p>When <b>not</b> to use transactional fixtures:</p>
<ol><li>
<p>You’re testing whether a transaction works correctly. Nested transactions
don’t commit until all parent transactions commit, particularly, the
fixtures transaction which is begun in setup and rolled back in teardown.
Thus, you won’t be able to verify the results of your transaction until
Active Record supports nested transactions or savepoints (in progress).</p>
</li><li>
<p>Your database does not support transactions. Every Active Record database
supports transactions except MySQL MyISAM. Use InnoDB, MaxDB, or NDB
instead.</p>
</li></ol>

<h1>Advanced YAML <a href="Object.html#Fixtures">Fixtures</a></h1>

<p>YAML fixtures that don’t specify an ID get some extra features:</p>
<ul><li>
<p>Stable, autogenerated IDs</p>
</li><li>
<p>Label references for associations (belongs_to, has_one, has_many)</p>
</li><li>
<p>HABTM associations as inline lists</p>
</li><li>
<p>Autofilled timestamp columns</p>
</li><li>
<p><a href="Object.html#Fixture">Fixture</a> label interpolation</p>
</li><li>
<p>Support for YAML defaults</p>
</li></ul>

<h2>Stable, autogenerated IDs</h2>

<p>Here, have a monkey fixture:</p>

<pre>george:
  id: 1
  name: George the Monkey

reginald:
  id: 2
  name: Reginald the Pirate</pre>

<p>Each of these fixtures has two unique identifiers: one for the database and
one for the humans. Why don’t we generate the primary key instead? Hashing
each fixture’s label yields a consistent ID:</p>

<pre>george: # generated id: 503576764
  name: George the Monkey

reginald: # generated id: 324201669
  name: Reginald the Pirate</pre>

<p>Active Record looks at the fixture’s model class, discovers the correct
primary key, and generates it right before inserting the fixture into the
database.</p>

<p>The generated ID for a given label is constant, so we can discover any
fixture’s ID without loading anything, as long as we know the label.</p>

<h2>Label references for associations (belongs_to, has_one, has_many)</h2>

<p>Specifying foreign keys in fixtures can be very fragile, not to mention
difficult to read. Since Active Record can figure out the ID of any fixture
from its label, you can specify FK’s by label instead of ID.</p>

<h3>belongs_to</h3>

<p>Let’s break out some more monkeys and pirates.</p>

<pre>### in pirates.yml

reginald:
  id: 1
  name: Reginald the Pirate
  monkey_id: 1

### in monkeys.yml

george:
  id: 1
  name: George the Monkey
  pirate_id: 1</pre>

<p>Add a few more monkeys and pirates and break this into multiple files, and
it gets pretty hard to keep track of what’s going on. Let’s use labels
instead of IDs:</p>

<pre>### in pirates.yml

reginald:
  name: Reginald the Pirate
  monkey: george

### in monkeys.yml

george:
  name: George the Monkey
  pirate: reginald</pre>

<p>Pow! All is made clear. Active Record reflects on the fixture’s model
class, finds all the <tt>belongs_to</tt> associations, and allows you to
specify a target <b>label</b> for the <b>association</b> (monkey: george)
rather than a target <b>id</b> for the <b>FK</b> (<tt>monkey_id: 1</tt>).</p>

<h4>Polymorphic belongs_to</h4>

<p>Supporting polymorphic relationships is a little bit more complicated,
since Active Record needs to know what type your association is pointing
at. Something like this should look familiar:</p>

<pre>### in fruit.rb

belongs_to :eater, :polymorphic =&gt; true

### in fruits.yml

apple:
  id: 1
  name: apple
  eater_id: 1
  eater_type: Monkey</pre>

<p>Can we do better? You bet!</p>

<pre>apple:
  eater: george (Monkey)</pre>

<p>Just provide the polymorphic target type and Active Record will take care
of the rest.</p>

<h3>has_and_belongs_to_many</h3>

<p>Time to give our monkey some fruit.</p>

<pre>### in monkeys.yml

george:
  id: 1
  name: George the Monkey

### in fruits.yml

apple:
  id: 1
  name: apple

orange:
  id: 2
  name: orange

grape:
  id: 3
  name: grape

### in fruits_monkeys.yml

apple_george:
  fruit_id: 1
  monkey_id: 1

orange_george:
  fruit_id: 2
  monkey_id: 1

grape_george:
  fruit_id: 3
  monkey_id: 1</pre>

<p>Let’s make the HABTM fixture go away.</p>

<pre>### in monkeys.yml

george:
  id: 1
  name: George the Monkey
  fruits: apple, orange, grape

### in fruits.yml

apple:
  name: apple

orange:
  name: orange

grape:
  name: grape</pre>

<p>Zap! No more fruits_monkeys.yml file. We’ve specified the list of fruits on
George’s fixture, but we could’ve just as easily specified a list of
monkeys on each fruit. As with <tt>belongs_to</tt>, Active Record reflects
on the fixture’s model class and discovers the
<tt>has_and_belongs_to_many</tt> associations.</p>

<h2>Autofilled timestamp columns</h2>

<p>If your table/model specifies any of Active Record’s standard timestamp
columns (<tt>created_at</tt>, <tt>created_on</tt>, <tt>updated_at</tt>,
<tt>updated_on</tt>), they will automatically be set to <tt>Time.now</tt>.</p>

<p>If you’ve set specific values, they’ll be left alone.</p>

<h2><a href="Object.html#Fixture">Fixture</a> label interpolation</h2>

<p>The label of the current fixture is always available as a column value:</p>

<pre>geeksomnia:
  name: Geeksomnia's Account
  subdomain: $LABEL</pre>

<p>Also, sometimes (like when porting older join table fixtures) you’ll need
to be able to get a hold of the identifier for a given label. ERB to the
rescue:</p>

<pre>george_reginald:
  monkey_id: &lt;%= ActiveRecord::Fixtures.identify(:reginald) %&gt;
  pirate_id: &lt;%= ActiveRecord::Fixtures.identify(:george) %&gt;</pre>

<h2>Support for YAML defaults</h2>

<p>You probably already know how to use YAML to set and reuse defaults in your
<tt>database.yml</tt> file. You can use the same technique in your
fixtures:</p>

<pre>DEFAULTS: &amp;DEFAULTS
  created_on: &lt;%= 3.weeks.ago.to_s(:db) %&gt;

first:
  name: Smurf
  &lt;&lt;: *DEFAULTS

second:
  name: Fraggle
  &lt;&lt;: *DEFAULTS</pre>

<p>Any fixture labeled “DEFAULTS” is safely ignored.</p></dd>
          
        
          <dt><a name="Fixtures">Fixtures</a></dt>
          
          <dd class="description"></dd>
          
        
        </dl>
      </div>
      

      

      <!-- Methods -->
      
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

